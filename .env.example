# ============================================================================
# OpenMeal Infrastructure - Environment Configuration
# ============================================================================
# Copy this file to .env and customize for your deployment environment
#
# Usage:
#   cp .env.example .env
#   Set ENVIRONMENT below, then: make up
# ============================================================================

# ----------------------------------------------------------------------------
# Docker Compose Configuration
# ----------------------------------------------------------------------------

# Project name (used as prefix for containers and networks)
COMPOSE_PROJECT_NAME=openmeal-backend

# Container name prefix
CONTAINER_PREFIX=openmeal

# Docker network configuration
DOCKER_NETWORK_NAME=openmeal_net
DOCKER_NETWORK_EXTERNAL=false

# ----------------------------------------------------------------------------
# Deployment Environment
# ----------------------------------------------------------------------------

# Environment type (local-dev, shared-dev, stage, prod)
ENVIRONMENT=local-dev

# System timezone
TZ=Etc/UTC

# ----------------------------------------------------------------------------
# PostgreSQL Configuration
# ----------------------------------------------------------------------------

POSTGRES_USER=postgres
POSTGRES_PASSWORD=openmeal_postgres
POSTGRES_DB=openmeal
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# ----------------------------------------------------------------------------
# MongoDB Configuration
# ----------------------------------------------------------------------------

MONGO_ROOT_USERNAME=root
MONGO_ROOT_PASSWORD=openmeal_mongo
MONGO_HOST=mongodb
MONGO_PORT=27017

# ----------------------------------------------------------------------------
# Redis Configuration
# ----------------------------------------------------------------------------

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=0

# ----------------------------------------------------------------------------
# Redpanda (Kafka-compatible) Configuration
# ----------------------------------------------------------------------------

# Internal connection (from Docker containers)
KAFKA_BOOTSTRAP_SERVERS=redpanda:9092
REDPANDA_INTERNAL_PORT=9092

# External connection (for shared-dev remote access)
# Leave REDPANDA_EXTERNAL_PORT empty to disable external access (stage/prod)
# Set to 19092 to enable external access (shared-dev only)
REDPANDA_EXTERNAL_PORT=
REDPANDA_ADVERTISED_HOST=localhost

# ----------------------------------------------------------------------------
# Keycloak Configuration
# ----------------------------------------------------------------------------

KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=admin123
KEYCLOAK_DB_NAME=keycloak
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=openmeal_keycloak_db
KEYCLOAK_HOSTNAME=localhost
KEYCLOAK_HTTP_PORT=8080

# ----------------------------------------------------------------------------
# MinIO Configuration
# ----------------------------------------------------------------------------

MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=openmeal_minio
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_HOST=minio

# ----------------------------------------------------------------------------
# Nginx & SSL Configuration
# ----------------------------------------------------------------------------

HTTP_PORT=80
HTTPS_PORT=443

# Domain configuration
API_GATEWAY_HOST=localhost
API_GATEWAY_PORT=8080
API_DOMAIN_NAME=api.yourdomain.com
KEYCLOAK_DOMAIN_NAME=auth.yourdomain.com
# Leave GRAFANA_DOMAIN_NAME empty to disable Grafana on shared-dev/stage.
# Set to your domain name to enable Grafana on prod.
GRAFANA_DOMAIN_NAME=""

# Nginx template (auto-managed by Ansible during deployment)
# default-http-only.conf.template - HTTP only (for SSL certificate acquisition)
# default.conf.template - Full HTTPS configuration
NGINX_CONFIG_TEMPLATE=default.conf.template

# SSL configuration (stage/prod only)
SSL_EMAIL=admin@yourdomain.com
SSL_STAGING=false

# ----------------------------------------------------------------------------
# Monitoring Configuration
# ----------------------------------------------------------------------------

# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=openmeal_grafana
GRAFANA_PORT=3000
